{"timestamp": "2025-12-16T00:05:38.632309", "level": "ERROR", "logger": "uvicorn.error", "message": "Traceback (most recent call last):\n  File \"C:\\Users\\akfma\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 725, in run_until_complete\n    return future.result()\n           ~~~~~~~~~~~~~^^\nasyncio.exceptions.CancelledError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\akfma\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           ~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 123, in run\n    raise KeyboardInterrupt()\nKeyboardInterrupt\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 701, in lifespan\n    await receive()\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\uvicorn\\lifespan\\on.py\", line 137, in receive\n    return await self.receive_queue.get()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\queues.py\", line 186, in get\n    await getter\nasyncio.exceptions.CancelledError\n", "module": "on", "function": "send", "line": 134}
{"timestamp": "2025-12-16T00:24:21.972261", "level": "ERROR", "logger": "backend", "message": "Erro: POST http://localhost:8000/upload/Movimentacao - KeyError", "module": "logger", "function": "log_error", "line": 91, "request_id": "0d8fe16e-1fe0-4608-a39c-753fd5f8564e", "event_type": "error", "method": "POST", "url": "http://localhost:8000/upload/Movimentacao", "status_code": 500, "error_type": "KeyError", "error_message": "0", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\logging_middleware.py\", line 37, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 385, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 286, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\to_thread.py\", line 61, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2525, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\routers\\upload.py\", line 33, in upload_file\n    log = log_service.criar_log(log_data)\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\services\\log_importacao_service.py\", line 10, in criar_log\n    new_id = self.repo.insert_returning(\n        \"LogImportacao\",\n        log_data,\n        \"id_log_importacao\"\n    )\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\database\\repository.py\", line 94, in insert_returning\n    return result[0] if result else None\n           ~~~~~~^^^\nKeyError: 0"}
{"timestamp": "2025-12-16T00:24:22.261305", "level": "ERROR", "logger": "backend", "message": "Erro: POST http://localhost:8000/upload/Movimentacao - KeyError", "module": "logger", "function": "log_error", "line": 91, "request_id": "0d8fe16e-1fe0-4608-a39c-753fd5f8564e", "event_type": "error", "method": "POST", "url": "http://localhost:8000/upload/Movimentacao", "status_code": 500, "error_type": "KeyError", "error_message": "0", "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\logging_middleware.py\", line 37, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 385, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 286, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\to_thread.py\", line 61, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2525, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\routers\\upload.py\", line 33, in upload_file\n    log = log_service.criar_log(log_data)\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\services\\log_importacao_service.py\", line 10, in criar_log\n    new_id = self.repo.insert_returning(\n        \"LogImportacao\",\n        log_data,\n        \"id_log_importacao\"\n    )\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\database\\repository.py\", line 94, in insert_returning\n    return result[0] if result else None\n           ~~~~~~^^^\nKeyError: 0"}
{"timestamp": "2025-12-16T00:24:22.460864", "level": "ERROR", "logger": "uvicorn.error", "message": "Exception in ASGI application\n", "module": "httptools_impl", "function": "run_asgi", "line": 414, "exception": "Traceback (most recent call last):\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\uvicorn\\protocols\\http\\httptools_impl.py\", line 409, in run_asgi\n    result = await app(  # type: ignore[func-returns-value]\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        self.scope, self.receive, self.send\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\uvicorn\\middleware\\proxy_headers.py\", line 60, in __call__\n    return await self.app(scope, receive, send)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\applications.py\", line 1139, in __call__\n    await super().__call__(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\applications.py\", line 107, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 186, in __call__\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 191, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_utils.py\", line 85, in collapse_excgroups\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 193, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\logging_middleware.py\", line 37, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 168, in call_next\n    raise app_exc from app_exc.__cause__ or app_exc.__context__\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 119, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 105, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 385, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\fastapi\\routing.py\", line 286, in run_endpoint_function\n    return await run_in_threadpool(dependant.call, **values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\starlette\\concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\to_thread.py\", line 61, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 2525, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"C:\\Users\\akfma\\AppData\\Local\\pypoetry\\Cache\\virtualenvs\\backend-CU2hy0_9-py3.13\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\routers\\upload.py\", line 33, in upload_file\n    log = log_service.criar_log(log_data)\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\services\\log_importacao_service.py\", line 10, in criar_log\n    new_id = self.repo.insert_returning(\n        \"LogImportacao\",\n        log_data,\n        \"id_log_importacao\"\n    )\n  File \"C:\\Users\\akfma\\gestock\\backend\\backend\\database\\repository.py\", line 94, in insert_returning\n    return result[0] if result else None\n           ~~~~~~^^^\nKeyError: 0"}
